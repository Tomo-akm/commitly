// ============================================
// App Shell Layout (left-nav / main / right-nav)
// ============================================

.app-shell {
  min-height: 100vh;
  background:
    radial-gradient(circle at top left, rgba($secondary, 0.18), transparent 45%),
    radial-gradient(circle at bottom right, rgba($primary, 0.12), transparent 50%),
    $bg-primary;
}

.app-shell__frame {
  display: flex;
  width: 100%;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  gap: $spacing-6;
  padding: 0 $spacing-6;
}

body.side-panel-open .app-shell__frame {
  max-width: none;
  margin: 0;
  margin-left: $spacing-1;
  padding-left: clamp($spacing-6, calc((100vw - 1400px) / 2 + #{$spacing-6}), 200px);
}

.app-shell--single {
  .app-shell__main {
    justify-content: flex-start;
  }

  .app-shell__main-inner {
    max-width: 980px;
  }
}

.app-shell--auth {
  .app-shell__main {
    justify-content: center;
  }
}

.app-shell__left,
.app-shell__right {
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  padding: $spacing-6 $spacing-5;
  background: transparent;
}

.app-shell__left {
  width: 280px;
}

.app-shell__right {
  width: 320px;
}

.app-shell__main {
  flex: 1 1 auto;
  min-width: 0;
  display: flex;
  justify-content: center;
}

.app-shell__frame > .resizable-layout {
  flex: 1 1 auto;
  min-width: 0;
}

.app-shell__main-inner {
  width: 100%;
  max-width: 900px;
  min-height: 100vh;
  padding: $spacing-8 0;
}

.app-shell__main-inner.app-shell__main-inner--auth {
  max-width: 600px;
}

.app-shell__main--flush .app-shell__main-inner {
  max-width: 100%;
  padding: 0;
}

.left-nav {
  display: flex;
  flex-direction: column;
  min-height: 100%;
  gap: $spacing-6;
}

.left-nav__brand {
  color: $primary-dark;
  font-size: $font-size-xl;
  font-weight: $font-weight-bold;
  letter-spacing: 0.02em;
}

.left-nav__section-title {
  color: $neutral-500;
  font-size: $font-size-xs;
  font-weight: $font-weight-semibold;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-bottom: $spacing-3;
  display: block;
}

.left-nav__link {
  display: flex;
  align-items: center;
  gap: $spacing-3;
  color: $neutral-900;
  padding: $spacing-3 $spacing-3;
  border-radius: $border-radius-pill;
  text-decoration: none;
  transition: all $transition-speed-base $transition-timing-ease-in-out;

  .icon-24 {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba($primary, 0.1);
    color: $primary-dark;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: all $transition-speed-base $transition-timing-ease-in-out;
  }

  &:hover {
    background: rgba($primary, 0.12);
    color: $primary-dark;

    .icon-24 {
      background: rgba($primary, 0.2);
      transform: translateY(-1px);
    }
  }
}

.left-nav__dropdown {
  .dropdown-menu {
    position: static;
    float: none;
    box-shadow: $shadow-sm;
    border: 1px solid $layout-border-color;
    border-radius: $border-radius-base;
    padding: $spacing-2;
    margin-top: $spacing-2;
    background-color: $panel-bg;
    overflow: hidden;
  }

  .dropdown-item {
    padding: $spacing-2 $spacing-4;
    transition: all $transition-speed-fast $transition-timing-ease-in-out;
    overflow: hidden;
    margin: 0;
    border-radius: $border-radius-base;

    &:hover {
      background: linear-gradient(135deg, lighten($primary, 15%) 0%, lighten($primary-dark, 5%) 100%);
      color: white;
      transform: translateX(4px);
    }

    &.text-danger:hover {
      background: linear-gradient(135deg, lighten($primary, 15%) 0%, lighten($primary-dark, 5%) 100%);
      color: white;
    }
  }
}

.left-nav__user {
  margin-top: auto;
  padding-top: $spacing-6;
  border-top: 1px solid $layout-border-color;
}

.right-nav__section {
  margin-bottom: $spacing-6;
}

@media (max-width: $breakpoint-lg) {
  .app-shell__frame {
    flex-direction: column;
    max-width: 100%;
    padding: 0 $spacing-4;
    gap: $spacing-4;
  }

  .app-shell__left,
  .app-shell__right {
    position: static;
    width: 100%;
    height: auto;
    padding: $spacing-4;
  }

  .app-shell__main {
    padding: 0;
  }

  .app-shell__main-inner {
    padding: $spacing-6 0;
  }
}
